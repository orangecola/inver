<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
</head>
<body>
	<div class="g-chart"></div>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <script type="text/javascript">

		var genderData 
        var width = 460,
		height = 300,
		radius = Math.min(width, height) / 2;

		var color = d3.scale.ordinal()
		.range(["#0000FF", "#FF0000"]);

		var pie = d3.layout.pie()
		.sort(null);

		var arc = d3.svg.arc()
		.innerRadius(radius - 100)
		.outerRadius(radius - 50);
		
		var svg = d3.select("body").append("svg")
		.attr("width", width)
		.attr("height", height)
		.append("g")
		.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

		d3.csv("datasets/idackandataset2.csv", function(text) {
				genderData = text.map(function(d) {return {shape_id:d.shape_id, locals:d.locals, visitors:d.visitors};})
				
				console.log(getGender(12432)[0])
				filteredGender = [+getGender(12432)[0].locals, +getGender(12432)[0].visitors]
				console.log(filteredGender)
				
				var path = svg.selectAll("path")
					.data(pie(filteredGender))
					.enter().append("path")
					.attr("fill", function(d, i) { return color(i); })
					.attr("d", arc);
				})

		function getGender(id) {
			
			return genderData.filter(function (d, i) {
				if (d["shape_id"] == id)
					return d
			})
		}
		
		
		
		
		
		
    </script>
</body>
</html>
